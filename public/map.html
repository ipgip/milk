<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title> Подключаем API </title>
    <script src="https://api-maps.yandex.ru/1.1/index.xml" type="text/javascript"></script>
</head>

<body>

    <!-- Создаём контейнер для карты -->
    <div id="YMaps" style="width: 600px; height: 400px"></div>

    <!-- карта -->
    <script>
        let lt = 0;
        let lo = 0;

        navigator.geolocation.getCurrentPosition(success, error, {
            // высокая точность
            enableHighAccuracy: true
        })

        function success({ coords }) {
            // получаем широту и долготу
            let { latitude, longitude } = coords
            // const position = [latitude, longitude]
            // console.log(position) // [широта, долгота]
            lt = latitude;
            lo = longitude;
            console.log('3', lo, lt);
            // // Устанавливает начальные параметры отображения карты: центр карты и коэффициент масштабирования
            // map.setCenter(new YMaps.GeoPoint(lo, lt), 10);
        }

        function error({ message }) {
            console.log(message) // при отказе в доступе получаем PositionError: User denied Geolocation
        }

        window.onload = async function () {
            // Создает экземпляр карты и привязывает его к созданному контейнеру
            var map = new YMaps.Map(document.getElementById("YMaps"));

            // let pos = await navigator.geolocation.getCurrentPosition(success, error, {
            //     // высокая точность
            //     enableHighAccuracy: true
            // })

            // async function success({ coords }) {
            //     // получаем широту и долготу
            //     let { latitude, longitude } = coords
            //     const position = [latitude, longitude]
            //     // console.log(position) // [широта, долгота]
            //     lt = latitude;
            //     lo = longitude;
            //     console.log('1',lo, lt);
            //     // // Устанавливает начальные параметры отображения карты: центр карты и коэффициент масштабирования
            //     map.setCenter(new YMaps.GeoPoint(lo, lt), 10);
            //     return position;
            // }

            // function error({ message }) {
            //     console.log(message) // при отказе в доступе получаем PositionError: User denied Geolocation
            // }

            console.log('2',lo, lt);
            // Устанавливает начальные параметры отображения карты: центр карты и коэффициент масштабирования
            // map.setCenter(new YMaps.GeoPoint(lo, lt), 10);
        };
    </script>
</body>

</html>